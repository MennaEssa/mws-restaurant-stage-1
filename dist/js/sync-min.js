function AddtoSyncFavDB(e,t){DBHelper.indexdb_init().then(n=>{var o=n.transaction(syncFav_store,"readwrite");o.objectStore(syncFav_store).put({id:e,isFav:t},e),o.complete.then(console.log("added fav to sync to indexdb"))})}function AddtoSyncRevDB(e){DBHelper.indexdb_init().then(t=>{var n=t.transaction(syncRev_store,"readwrite");n.objectStore(syncRev_store).put(e,e.name+e.restaurant_id),n.complete.then(console.log("added review to sync to indexdb"))})}function doSync(){let e=DBHelper.indexdb_init();e.then(function(e){e.transaction(syncFav_store).objectStore(syncFav_store).getAll().then(t=>{t.forEach(t=>{DBHelper.updateFav(t.id,t.isFav).then(()=>{e.transaction(syncFav_store,"readwrite").objectStore(syncFav_store).delete(t.id)}).catch(e=>console.log(`failed to sync fav ${t.id} : ${e}`))})})}),e.then(function(e){e.transaction(syncRev_store).objectStore(syncRev_store).getAll().then(t=>{t.forEach(t=>{DBHelper.sendReview(t).then(()=>{e.transaction(syncRev_store,"readwrite").objectStore(syncRev_store).delete(t.name+t.restuarant_id)}).catch(e=>console.log(`failed to sync fav ${fav.id} : ${e}`))})})})}window.addEventListener("online",doSync);